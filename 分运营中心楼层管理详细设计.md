# 分运营中心楼层管理详细设计

频道楼层信息表mall_channel_storey需要添加一个字段：OWNER_USER_ID 拥有者分运营中心ID。楼层常规功能有：

  - 新增楼层(楼层名称唯一)、楼层名称从（可用的、没有删除的）1级分类信息表中获得
  - 编辑楼层(启用、排序值越小排序越靠前)名称不能修改
  - 删除楼层(需要先删除楼层下的商品、品牌信息才能删除楼层)
  
本次详细设计不包含原来大运营中心楼层频道数据管理。只是做了兼容性的修改。进行一下操作的前提是：管理的频道楼层属于哪个 mall_channel 频道。

## 1.频道楼层新增
新增楼层名称从1级分类中获得、不能修改名称，需要录入的信息有：

1. STOREY_NAME 1级分类 名称唯一
2. FLOOR_ID 排序字段 1~100 的正整数
3. USER_STATUS 启用字段 0 未启用 1 启用
4. OWNER_USER_ID 拥有者id 当前分运营中心id。此处为何添加一个新字段而不是创建一个关联表呢？因为要兼容老数据所以不得不这样搞
5. CREATE_USER_ID 添加时间
6. CHANNEL_ID 对应的频道信息表(mall_channel)
7. GOODS_CAT_ID 商品分类id信息
8. DELFLAG 删除标记 0 未删除 1 删除
9. SHOW_CHILD_CATE 是否显示楼层分类的子分类 0 不显示 1 显示
10. SHOW_TRADEMARK 是否显示楼层品牌 0 不显示 1 显示
11. SHOW_ADVER	是否显示楼层广告 0 不显示 1 显示
12. id 最好是生成1~10 位长度纯数字的值 并且唯一呀

## 2.频道楼层编辑
编辑只能编辑状态和排序其他不能操作。变更的数据字段信息有：

1. USER_STATUS 启用字段 0 未启用 1 启用
2. FLOOR_ID 排序字段 1~100 的正整数
3. UPDATE_USER_ID 更新人和时间等

## 3.频道楼层删除
删除功能比较特殊、需要删除频道楼层中关联的商品表中的数据 mall_channel_storey_goods和品牌表数据mall_channel_trademark，后期可能还要包含其他数据。因此删除前需要判断是否频道楼层包含商品、品牌等。变更的字段信息有：

1. DELFLAG 删除标记 0 未删除 1 删除
2. UPDATE_DATE 修改时间


