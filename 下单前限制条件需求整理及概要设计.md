# 下单前限制需求整理(mall_order_create_regular)

下单前置条件需求整理、有以下条件限制需要整理。限制条件可以创造多个但是当且仅当只有商户类型最多有两个状态为开始状态。
分别为：第三方商户规则开始、自营商户规则开始

  - 商户类型：第三方商户 0、自营商户1 限制 
  - 实付金额 0、订单金额限制  1  
  - 活动商品参与不参与限制   exclude_sku_ids
  - 地区金额限制条件集合设置 参见 1 
  - 默认下单成功最低金额(default_create_order_success_amonut)
  - 下单限制说明文字描述(扩充字段)
  - 下单限制说明页面url(扩充字段)
  - 创建时间
  - 创建人
  - 更新时间
  - 更新人
  - 标记删除 0 未删除  1 删除
  - 删除时间
  - 删除人
  - 状态值描述：0 未开始   1 开始  2 暂停
  



## 1.区域价格规则设计 mall_order_create_area_price
区域最小单位为市、每一个市级区域都对应一个最小金额值.同一个市区只能有一个价格维护、不能出现同样的价格维护

- mall_order_create_regular 唯一标示
- 区域省Code 
- 区域市Code 
- 最小金额 min_order_price
- 区域价格说明
- 删除标记


## 2.下单之前就要获得 mall_order_create_regular
下单前要做的判断条件：


- 有状态开始的记录 参考 2.1
- 没有状态开始的记录 参考 2.2



### 2.1 根据规则记录获得区域价格限制条件
 根据客户 下单商品信息分组为： 第三方商户商品和自营商品。
 根据客户选择的配送区域的市获得地区价格 条件 如果匹配成功就对比订单金额和限制最小金额、如果对比没有记录就走默认价格限制。
 
### 2.2 没有规则不用限制
不处理

  


