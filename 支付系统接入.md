# 支付系统方案设计
从以下几个要点列出接入支付系统的步骤

1. 背景解析
2. 支付系统接入方案介绍
3. 功能介绍
4. 技术方案选型
5. 实施流程

## 1. 背景解析
  背景介绍
## 2. 支付系统接入方案介绍
  提供两套接入方式分别为：
1. 仅仅接入支付功能(类似支付收银台) 
2. 提供支付账户管理及支付、清算功能
## 3. 功能介绍
支付系统是一个提供**多种支付方式**的**可配置接口及支付规则**的统一平台系统，能满足客户业务多样性和复杂性的要求，能够快速接入、集中处理各渠道的订单支付，减少重复开发工作，提高客户的服务体验。总结下来有以下三点：

1. 提供多种支付方式统一接入，提供商家灵活可变的支付方式能力；
2. 业务快速接入支撑能力：建设一套灵活的业务接入机制，支撑业务快速生成和上线
3. 运营管理能力：提供包括商家管理、统计报表、支付通道管理、支付银行网关限额、快捷支付银行网关通道等运营管理功能，通过平台功能建设，快速支撑各种支付业务的接入和使用。

![支付平台接口](https://static.oschina.net/uploads/img/201604/05185611_Trdk.png "支付平台接口")
### 3.1 应用场景
支付系统一般应用到用户购物发起支付操作中、通过如下图可以详细的给出应用场景的概括
:![应用场景](https://static.oschina.net/uploads/img/201604/05191331_zOf4.png "支付系统的应用场景介绍")
### 3.2 建设原则
建设原则可以概括为以下五个原则

1. 快速
 - 内置支付引擎，使用业务特性变化，便于业务的快速部署和开展
2. 统一
- 标准化的接入流程，提供对支付方式的统一入口，提供高效、安全、接口统一的对账系统，满足不同业务系统的接入要求
3. 易用
- 提供多种交易手段并可扩充，方便的用户操作界面
4. 实时
- 提供实时监控点，交易异常，对账异常的业务监控和通知相关责任人能力
5. 灵活
- 提供支付方式灵活多样，任意组合能力，多种灵活的财务结算报表，按支付方式，业务类型等组合的才组明细和统计报表能力

### 3.3 支付功能框架
支付产品包含的功能如下图所示：
![统一支付系统支付功能](https://static.oschina.net/uploads/img/201604/05192229_0Gs3.png "统一支付系统支付功能简介")
如果作为第三方支付功能模块如下划分和整理：

![输入图片说明](https://static.oschina.net/uploads/img/201604/05192544_c4i2.png "在这里输入图片标题")
### 3.4 支付系统整理架构
![支付系统整体架构](https://static.oschina.net/uploads/img/201604/05192750_TJTJ.png "支付系统整体架构")
## 4. 技术方案选型
技术架构的选型是决定系统高可用性、高并发处理能力、高响应性的关键因素。因此技术选型采用Java语言作为程序开发语言使用如下技术框架：

- 采用Spring框架实现MVC网络三层架构
- 采用Mybatis作为数据访问模型层
- 采用dubbo作为SOA架构RPC访问层
- 采用Freemarker技术来实现定模板定制
- 采用Logback实现日志跟踪。
- 采用Redis、memcache实现分布式缓存
- 采用Maven构建、打包项目
- 采用Git作为代码版本管理工具
- 采用Nginx作为web服务器反向代理
- 采用tomcat作为应用服务器
- 使用Nginx、tomcat集群做负载集群部署
- 使用开源数据库Mysql存储数据

###  4.1 系统数据访问流程
![系统数据访问流程](https://static.oschina.net/uploads/img/201604/05194957_0ulK.png "系统数据访问流程")

###  4.2 系统数据架构
![数据架构](https://static.oschina.net/uploads/img/201604/05195539_OKXe.png "数据架构")

## 5. 实施流程
详细实施流程结合实际情况讨论。
