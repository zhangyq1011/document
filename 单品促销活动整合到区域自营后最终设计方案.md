# 单品促销活动整合到区域自营后最终设计方案
单品促销活动原来没有区域功能、需要修改为可以添加区域。具体详细方案参考产品部《单品促销添加区域产品设计》。因此此次设计待完善。
在不考虑区域活动的前提下做出如下设计及时间评估。

0. 单品促销活动整改(前后台项目都有涉及)
1. 商品详情页(前台项目)
2. 购物车页面(前台项目)
3. 结算页面(前台项目)
4. 个人用户中心订单列表页(前台项目)
5. 个人用户中心订单详情页(前台项目)
6. 供应商后台订单列表页(前台项目)
7. 供应商后台订单详情页(前台项目)
8. 供应商后台打印订单页(前台项目)
9. 运营后台订单列表页(后台项目)
10. 运营后台订单详情页(后台项目)
11. 运营后台订单管理模块(后台项目)
12. APP-Android(手机端项目)
13. App-IOS(手机端项目)
14. WAP订单列表页(前台项目)
15. WAP订单详情页(前台项目)

## 0.单品促销活动整改(前后台项目都有涉及)
单品促销活动整改需要注意两个地方、分别为:

1. 后台单品促销活动添加
2. 前台单品促销列表展示专区修改

## 0.1 后台单品促销活动

1. 表结构修改添加字段
2. 单品促销活动注意事项

### 0.1.1  表结构修改添加字段
在mall_single_promotion(单品促销活动表)中添加5个字段：OWNER_USER_ID(运营中心标识)、P_AREAS（促销区域）、促销图片(备用可选字段)、促销图片链接地址(备用可选字段)、P_TAG(促销标签)
5个字段的解释分别为:

- P_TAG	促销标签 0 无 1 每日特价 2 限时抢购[备用功能字段]
- OWNER_USER_ID(运营中心标识) 11 所有运营中心标识  1 大运营中心标识  其他(分运营中心ID)
- P_AREAS（促销区域） OWNER_USER_ID=11 时 此值为空   OWNER_USER_ID=1 时 该值用户根据动态读取大运营中心供应商入驻区域集合选择的区域 OWNER_USER_ID=其他 时该值选择对应分运营中心区域的子集
- P_SHOW_PIC 促销图片(备用可选字段)供前台展示使用
- P_SHOW_PIC_HREF 促销图片链接地址(备用可选字段)供前台展示锚点超链接使用

在mall_single_promotion_goods表中添加如下两个字段:

- P_SHOW_CHANNEL	推荐频道展示 0 未推荐首页 1 推荐首页
- P_CHANNEL_ID	推荐频道ID [备用字段]
[备用字段]
### 0.1.2  单品促销活动注意事项
新增单品促销最新原型设计:
![image](https://github.com/zhangyq1011/images-folder/blob/master/%E8%BF%90%E8%90%A5%E5%90%8E%E5%8F%B0%E5%8D%95%E5%93%81%E4%BF%83%E9%94%80.png)

从以上图中可以体现以下关键点:

1. 运营中心 选择平台中存在的可用的分运营中心和大运营中心(没有总运营中心概念)
2. 运营中心区域(区域从 运营中心中获得集合、可以选择子集)
3. 时间段限制 支持三个时间段
4. 促销渠道 PC WAP APP
5. 标签 

### 0.1.3 添加单品促销需要关注的关注点

1. 单品促销活动状态
   开启
   停止
2. 设置首页推荐规则
    一个特价活动，最多只能推荐4个商品到首页
3. 添加促销渠道
    促销渠道 PC WAP APP 可以多选
4. 添加多个单品促销活动的一句话规则
    同一个运营中心、同一个区域、同一个时间段(根据促销时间判断不能有1s的重叠)、同一个促销客户端只能发布一个标签为每日特价的单品促销活动
5. 商品筛选确认
    先选运营中心，再选运营中心下面支持活动的城市，不可以选所有运营中心。
 - 根据所选运营中心及区域，调用不同商品
 - 支持调用自营商品和第三方商家的商品
 - 如果一个商品添加到活动中、并且活动是开启状态。则再添加活动不会再搜索到这个商品
 

### 0.1.4 添加单品促销详细设计
同一个运营中心、同一个区域、同一个时间段(根据促销时间判断不能有1s的重叠)、同一个促销客户端只能发布一个标签为“每日特价”的单品促销活动。

- 1. 选择完运营中心、再选择运营中心区域后就要校验是否满足以上的规则。
- 2. 大运营中心区域与分运营中心管理区域不能出现重复。
- 3. 大运营区域的值是总区域的值减去所有分运营中心区域的集合

## 0.2 前台单品促销列表展示专区
前台单品促销活动展示应该在批发市场专区。具体展示规则为以下:

1. 用户进入批发市场
2. 用户必须选择区域
3. 后台根据区域获得单品促销活动列表
4. 根据 3 获得的单品促销列表进行异步展示、展示页面根据设计师设计的规则进行展示。
5. 根据单品促销活动的状态进行设计展示。此处状态复杂度小于商品详情页商品详情的展示、因此非常自信产品及设计师能设计出来体验良好的单品促销展示区
6. 可以考虑单品促销活动专区页面(参考使用)

## 1.商品详情页(前台项目)
PC和WAP功能雷同商品详情页修改的地方有如下列表:

1. 添加-送货至 与 首页   批发市场    物流服务  金融服务 平行
2. 删除详情页中心 送货至  更改为：省市 仅仅展示
3. 商品详情页-所有商品分类 如果有区域按照分运营中心区域显示分类信息
4. 根据单品促销活动 购买数目框中 动态变化。具体关联管理参考产品卫平《设计的详情页方案》。
5. 如果进入商品详情页 没有传递区域(具体区域code如何传递技术处理)、默认根据用户访问IP区域弹出区域选择弹出框供其选择、选择后刷新详情页。(技术这边定的方案)
6. 如果有单品促销活动添加数目、减少数目需要添加友好的提醒。提醒参考产品卫平《设计的详情页方案》。
7. 需要前端、产品部门配合。涉及到WAP APP   PC 等要综合考虑提供统一接口

初步预估开发周期：PC 6天   WAP 4天


## 2.购物车页面(前台项目)
PC和WAP功能雷同购物车修改的地方有如下列表:

1. 添加-送货至 与  购物车标题 平行
2. 如果进入购物车 没有传递区域(具体区域code如何传递技术处理)、默认根据用户访问IP区域弹出区域选择弹出框供其选择、选择后刷新购物车页面。(技术这边定的方案，请产品部参考)
3. 每次添加或者减少购物车数目、都要刷新前端购物车局部html页面然后更新局部。因为包含单品促销功能所有此处尤其麻烦、并且设计到购物车总价格等。此处是难点也是改动最大的地方
4. 需要前端、产品部门配合。涉及到WAP APP   PC 等要综合考虑提供统一接口

初步预估开发周期：PC 5天   WAP 4天


## 3.结算页面(前台项目)
结算管理收货人功能需要单独拿出来管理具体可以参考产品设计如下:

1. 如果默认地址为之前所选省市，则默认选择默认地址；

2. 如果默认地址不在所选择区域，则显示其他所选省市所在地址；

3. 如果没有所选地区的地址，则已有地址置灰；

4. 点击新增收货地址，如果填写的收货地址省市不在所选区域内，点击确定，添加成功后，仍然置灰；如果在所选区域内，则点击确定后，默认选中。

结算管理商品的展示和购物车走同样的接口和模式更改局部DOM、此处也是一个问题。下单接口需要调整：原来保存的同样的商品仅仅一份、现在要拆成多分(两份)。下单接口进行大的调整

初步预估开发周期：PC 3天   WAP 0.5 天   APP 1.5天


以上总共评估时间周期为：24 天  不过该评估都是保守评估。再花费两天时间会给出更详细的评估。

## 4.订单列表页待评估
订单列表页依赖结算下单接口、结算下单接口详细设计牵扯表结构比较多今天没给出设计明天给出评估。




