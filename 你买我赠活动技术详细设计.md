# 你买我赠活动技术详细设计
需要有以下准备的条件分别为：

- 1. 活动主商品集合(有多少添加多少个主商品信息)
- 2. 活动赠品(关注赠品的库存)
- 3. 活动开始时间和结束时间(如果没有设置结束时间默认取其他条件确定活动的结束)
- 4. 活动的其他限制条件：区域条件
- 5. 活动够买次数、购买量等限制条件
- 6. 活动订单限制条件(下单限制规则中有约束、请参考 下单规则需求文档)
- 7. 开发周期

## 1. 活动主商品集合(有多少添加多少个主商品信息)
在运营后台需要提供一个地址提交活动说明、添加活动主商品信息

## 2. 活动赠品(关注赠品的库存)
需要发布赠品 作为买赠活动的赠品并设置合理的库存、保存赠品库存不能任意变更以保证活动有序进行。如果赠品购买完毕、活动暂停吗？
参考 2.1

### 2.1 赠品赠送完后活动结束
关于赠品赠送完毕后页面展示在步骤 5. 中 需要考虑

## 3. 活动开始时间和结束时间
注意活动的开始时间和结束时间(如果没有设置结束时间默认取其他条件确定活动的结束)、活动开始的条件是主商品有库存、赠品也有库存
。请保证一个调度任务去定时查询活动开始和活动暂停。调度任务参考 3.1 

### 3.1活动定时开始调度任务
该调度任务重点检查：参与活动的主商品是否有库存、参与活动的赠品是否有库存、确定到期时间关闭活动等任务。

## 4. 活动的其他限制条件：区域条件
如下解决方案：不参与活动的区域设置库存为 零 可以解决该限制条件。

## 5. 活动够买次数、购买量等限制条件
活动要求：每个会员限赠一个赠品。另外用户首单买了赠品的商品，第二单，还可以下单，只是不显示赠品，这个能不能做到？或者好不好实现？显示问题是个需要考虑的问题，请考虑显示的位置信息：
- 商品详情页显示(用户登录状态如果第二次购买商品赠品是否显示问题)
- 购物车页面显示(购物车页面显示赠品，但是提交的时候判断，第二单，弹窗提醒：赠品仅限第一单获赠，不能重复购买，请重新下单。)这样购物车的判断很负责要夹带订单
- 立即购买是否添加限制(用户登录状态再次下单)
- 订单结算页面显示
关于赠品只能送一个或者享受一次优惠的详细设计可以参考: 单品促销设计。

## 6. 活动订单限制条件()
下单限制规则中有约束、请参考 下单规则需求文档。下单规则需求已在紧张开发中。

## 7. 开发周期
请先解决 5. 中显示的问题和 供应商后台打印订单是否也要打印等问题(已经修改完毕可以满足本次活动)
